import{_ as x,r as g,o as t,c as n,a as e,t as _,i as l,b as u,w as k,e as v,F as d,h}from"./index-aa26a53f.js";import{C as w}from"./clink-00e35e16.js";const L={name:"specimen",props:["specimen"],data(){return{current_media:""}},methods:{get_url(i){return`${this.$url_prefix}/`+i.url},change_media(i){i=="left"?this.current_media=this.current_media==0?this.specimen.medias.length-1:this.current_media-1:this.current_media=this.current_media==this.specimen.medias.length-1?0:this.current_media+1},async delete_specimen(){await fetch(`${this.$url_prefix}/especes/specimen/delete?q=${this.specimen.id}`).then(i=>{this.$router.push(`/especes/${this.specimen.taxonomie.id}`)})}},mounted(){this.specimen.medias.length!=0&&(this.current_media=0)}},M={class:"scrollable_content"},T={class:"columns is-gapless is-vcentered"},q={class:"column is-9"},H={key:0},S={class:"column is-3"},N={class:"button ghost_button"},V={class:"field has-addons"},B={class:"control"},R={class:"icon"},F={class:"control"},j={class:"icon"},D={key:0,class:"columns is-vcentered"},I={class:"column is-1"},J={class:"icon"},P={class:"column is-10"},A={key:0,controls:"",class:"embeb_position"},E=["src"],O={key:1,controls:"",class:"embeb_position"},U=["src"],z=["src"],G={class:"column is-1"},K={class:"icon"},Q={class:"columns"},W={class:"column is-12"},X=["innerHTML"];function Y(i,c,r,m,s,a){const p=g("font-awesome-icon"),y=g("RouterLink");return t(),n("div",M,[e("div",T,[e("div",q,[e("p",null,[r.specimen.herbier?(t(),n("small",H,"Part d'herbier : "+_(r.specimen.herbier)+"    ",1)):l("",!0),e("small",null,"Indigénat : "+_(r.specimen.indigenat.label),1)])]),e("div",S,[e("button",N,_(r.specimen.parcelle.label),1),e("div",V,[e("p",B,[u(y,{to:"/especes/"+r.specimen.taxonomie.id+"/create?q="+r.specimen.id,class:"button"},{default:k(()=>[e("span",R,[u(p,{icon:["fas","pen"]})])]),_:1},8,["to"])]),e("p",F,[e("a",{onClick:c[0]||(c[0]=b=>a.delete_specimen()),class:"button"},[e("span",j,[u(p,{icon:["fas","trash"]})])])])])])]),r.specimen.medias[s.current_media]?(t(),n("div",D,[e("div",I,[e("button",{class:"button",onClick:c[1]||(c[1]=b=>a.change_media("left"))},[e("span",J,[u(p,{icon:["fas","caret-left"]})])])]),e("div",P,[r.specimen.medias[s.current_media].type_media.code=="video"?(t(),n("video",A,[e("source",{src:a.get_url(r.specimen.medias[s.current_media])},null,8,E),v(" Votre navigateur ne supporte pas cette extension. ")])):r.specimen.medias[s.current_media].type_media=="bandeson"?(t(),n("audio",O,[e("source",{src:a.get_url(r.specimen.medias[s.current_media])},null,8,U),v(" Votre navigateur ne supporte pas cette extension. ")])):(t(),n("embed",{key:2,src:a.get_url(r.specimen.medias[s.current_media]),class:"embeb_position"},null,8,z))]),e("div",G,[e("button",{class:"button",onClick:c[2]||(c[2]=b=>a.change_media("right"))},[e("span",K,[u(p,{icon:["fas","caret-right"]})])])])])):l("",!0),e("div",Q,[e("div",W,[e("div",{innerHTML:i.md(r.specimen.historique)},null,8,X)])])])}const Z=x(L,[["render",Y]]),$={name:"especes_consult",components:{Specimen:Z,CLink:w},data(){return{data:{},tags:{conservation:[],iucn_monde:[],iucn_europe:[],iucn_region:[],floraison:[],type_bio:[],couleur_fleur:[]},from:"",to:"",specimens:[],current_specimen:"",data_ready:!1}},methods:{async get_taxon(){return await(await fetch(`${this.$url_prefix}/especes/get_taxon?q=${this.$route.params.id}`)).json()},async get_specimens(){return await(await fetch(`${this.$url_prefix}/especes/get_specimens?q=${this.$route.params.id}`)).json()},set_floraison(){let i=[],c=["Décembre","Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre"];for(let r in this.data.tags){let m=this.data.tags[r];m.reference=="ref.floraison"&&i.push(m)}if(i.length!=0){let r=0,m=0;for(let s in c){let a=c[s];i[0].label==a&&(r=s),i[i.length-1].label==a&&(m=s)}m-r+1==i.length?(this.from=i[0].label,this.to=i[i.length-1].label):(this.from=i[i.length-1].label,this.to=i[0].label)}},get_parents(){let i=[],c=this.data;for(;c.parent.parent!="";)i.push([`/especes/${c.parent.id}`,c.parent.nom]),c=c.parent;return i.push([`/especes/${c.parent.id}`,c.parent.nom]),i},set_tags(){for(let i in this.data.tags){let c=this.data.tags[i];this.tags[c.reference.slice(4)].push(c)}},change_specimen(i){i=="left"?this.current_specimen=this.current_specimen==0?this.specimens.length-1:this.current_specimen-1:this.current_specimen=this.current_specimen==this.specimens.length-1?0:this.current_specimen+1},async delete_taxon(){await fetch(`${this.$url_prefix}/especes/delete?q=${this.data.id}`).then(i=>{this.$router.push("/especes/search")})}},computed:{},async mounted(){this.data=await this.get_taxon(),this.specimens=await this.get_specimens(),this.specimens.length!=0&&(this.current_specimen=0),this.set_floraison(),this.set_tags(),this.data_ready=!0}},ee={key:0},se={class:"container larger_form bottom_120"},te={class:"form_position"},ne={class:"box"},ie={class:"columns"},oe={class:"column is-7"},ce={class:"columns is-multiline text_break"},le={class:"column is-10"},re={class:"title is-3 jasmine"},_e={key:0},ae=e("small",null,"Classification : ",-1),ue={key:0},de={key:0},he=e("small",null,"Publication : ",-1),me=["innerHTML"],pe={class:"column is-2"},ge={class:"button ghost_button"},be={class:"field has-addons"},fe={class:"control"},ve={class:"icon"},ye={class:"control"},ke={class:"icon"},xe={key:0,class:"column is-half"},Ce=e("p",{class:"subtitle is-6"},"Synonymes courants :",-1),we={class:"subtitle is-6"},Le={key:0},Me={key:1},Te={key:1,class:"column is-half"},qe=e("p",{class:"subtitle is-6"},"Noms vernaculaires :",-1),He={class:"subtitle is-6"},Se={key:0},Ne={key:1},Ve={class:"column is-12"},Be=["innerHTML"],Re={class:"column is-12"},Fe=e("p",{class:"subtitle is-6"},[e("b",null,"Bibliographie :")],-1),je=["innerHTML"],De={key:2,class:"column is-6"},Ie=e("p",{class:"subtitle is-6"},[e("b",null,"Conservation :")],-1),Je={class:"subtitle is-6"},Pe={key:0},Ae={key:0,class:"subtitle is-6"},Ee=e("b",null," Status IUCN :",-1),Oe=[Ee],Ue={class:"columns is-multiline"},ze={key:0,class:"column is-6"},Ge=e("p",{class:"subtitle is-6"},[e("b",null,"  Mondial :")],-1),Ke={class:"subtitle is-6"},Qe={key:0},We={key:1,class:"column is-6"},Xe=e("p",{class:"subtitle is-6"},[e("b",null,"  Européen :")],-1),Ye={class:"subtitle is-6"},Ze={key:0},$e={key:2,class:"column is-6"},es=e("p",{class:"subtitle is-6"},[e("b",null,"  Régional :")],-1),ss={class:"subtitle is-6"},ts={key:0},ns={key:3,class:"column is-6"},is=e("p",{class:"subtitle is-6"},[e("b",null,"Biologie :")],-1),os={key:0,class:"subtitle is-6"},cs=e("b",null," Floraison : ",-1),ls={key:1,class:"subtitle is-6"},rs=e("b",null," Type biologique : ",-1),_s={key:0},as={key:2,class:"subtitle is-6"},us=e("b",null," Couleur des fleurs : ",-1),ds={key:0},hs={class:"column is-5"},ms={class:"columns is-multiline"},ps={class:"column is-12 text_center"},gs={key:0,class:"column is-12",style:{height:"500px"}},bs={class:"box"},fs={key:1,class:"column is-12"},vs={class:"buttons spaced_buttons"};function ys(i,c,r,m,s,a){const p=g("CLink"),y=g("font-awesome-icon"),b=g("RouterLink"),C=g("Specimen");return s.data_ready?(t(),n("div",ee,[e("div",se,[e("div",te,[e("div",ne,[e("div",ie,[e("div",oe,[e("div",ce,[e("div",le,[e("p",re,[e("i",null,_(s.data.nom),1),v(" "+_(s.data.auteur)+", "+_(s.data.annee),1)]),e("p",null,[s.data.parent?(t(),n("span",_e,[ae,(t(!0),n(d,null,h(a.get_parents().reverse(),(o,f)=>(t(),n("small",null,[a.get_parents().length>1&&f>0?(t(),n("span",ue," < ")):l("",!0),u(p,{link:o[0],nom:o[1]},null,8,["link","nom"])]))),256))])):l("",!0)]),e("p",null,[s.data.publication?(t(),n("span",de,[he,e("small",null,[e("div",{innerHTML:i.md(s.data.publication)},null,8,me)])])):l("",!0)])]),e("div",pe,[e("button",ge,_(s.data.rang.label),1),e("div",be,[e("p",fe,[u(b,{to:"/especes/create?q="+s.data.id,class:"button"},{default:k(()=>[e("span",ve,[u(y,{icon:["fas","pen"]})])]),_:1},8,["to"])]),e("p",ye,[e("a",{onClick:c[0]||(c[0]=o=>a.delete_taxon()),class:"button"},[e("span",ke,[u(y,{icon:["fas","trash"]})])])])])]),s.data.synonymes.length!=0?(t(),n("div",xe,[Ce,e("p",we,[(t(!0),n(d,null,h(s.data.synonymes,(o,f)=>(t(),n("span",null,[f!=s.data.synonymes.length-1?(t(),n("span",Le,_(o.synonyme)+", ",1)):(t(),n("span",Me,_(o.synonyme),1))]))),256))])])):l("",!0),s.data.vernaculaires.length!=0?(t(),n("div",Te,[qe,e("p",He,[(t(!0),n(d,null,h(s.data.vernaculaires,(o,f)=>(t(),n("span",null,[f!=s.data.vernaculaires.length-1?(t(),n("span",Se,_(o.vernaculaire)+", ",1)):(t(),n("span",Ne,_(o.vernaculaire),1))]))),256))])])):l("",!0),e("div",Ve,[e("div",{innerHTML:i.md(s.data.description),class:"box"},null,8,Be)]),e("div",Re,[Fe,e("div",{innerHTML:i.md(s.data.bibliographie)},null,8,je)]),s.tags.conservation.length!=0||s.tags.iucn_monde.length!=0||s.tags.iucn_europe.length!=0||s.tags.iucn_region.length!=0?(t(),n("div",De,[Ie,e("p",Je,[(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.conservation"?(t(),n("p",Pe," "+_(o.label),1)):l("",!0)]))),256))]),s.tags.iucn_monde.length!=0||s.tags.iucn_europe.length!=0||s.tags.iucn_region.length!=0?(t(),n("p",Ae,Oe)):l("",!0),e("div",Ue,[s.tags.iucn_monde.length!=0?(t(),n("div",ze,[Ge,e("p",Ke,[(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.iucn_monde"?(t(),n("p",Qe,"   "+_(o.label),1)):l("",!0)]))),256))])])):l("",!0),s.tags.iucn_europe.length!=0?(t(),n("div",We,[Xe,e("p",Ye,[(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.iucn_europe"?(t(),n("p",Ze,"   "+_(o.label),1)):l("",!0)]))),256))])])):l("",!0),s.tags.iucn_region.length!=0?(t(),n("div",$e,[es,e("p",ss,[(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.iucn_region"?(t(),n("p",ts,"   "+_(o.label),1)):l("",!0)]))),256))])])):l("",!0)])])):l("",!0),s.tags.floraison.length!=0||s.tags.type_bio.length!=0||s.tags.couleur_fleur.length!=0?(t(),n("div",ns,[is,s.tags.floraison.length!=0?(t(),n("p",os,[cs,v(" De "+_(s.from)+" à "+_(s.to),1)])):l("",!0),s.tags.type_bio.length!=0?(t(),n("p",ls,[rs,(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.type_bio"?(t(),n("span",_s,_(o.label)+", ",1)):l("",!0)]))),256))])):l("",!0),s.tags.couleur_fleur.length!=0?(t(),n("p",as,[us,(t(!0),n(d,null,h(s.data.tags,o=>(t(),n("span",null,[o.reference=="ref.couleur_fleur"?(t(),n("span",ds,_(o.label)+", ",1)):l("",!0)]))),256))])):l("",!0)])):l("",!0)])]),e("div",hs,[e("div",ms,[e("div",ps,[u(b,{to:"/especes/"+s.data.id+"/create",class:"button"},{default:k(()=>[v("Insérer un specimen")]),_:1},8,["to"])]),s.specimens.length!=0?(t(),n("div",gs,[e("div",bs,[u(C,{specimen:s.specimens[s.current_specimen]},null,8,["specimen"])])])):l("",!0),s.specimens.length!=0?(t(),n("div",fs,[e("div",vs,[e("button",{class:"button",onClick:c[1]||(c[1]=o=>a.change_specimen("left"))},"Précédent"),e("button",{class:"button",onClick:c[2]||(c[2]=o=>a.change_specimen("right"))},"Suivant")])])):l("",!0)])])])])])])])):l("",!0)}const Cs=x($,[["render",ys]]);export{Cs as default};
