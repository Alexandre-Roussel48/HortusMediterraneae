import{_ as y,r as k,o as t,c as e,a as s,t as c,i as a,F as p,h as b,b as h,e as r,n as v}from"./index-e0acc92b.js";const g={name:"anim_consult",components:{},data(){return{data:{},data_ready:!1}},methods:{async get_anim(){return await(await fetch(`${this.$url_prefix}/pedagogie/get_anim?q=${this.$route.params.id}`)).json()},get_duree_totale(){let n=0;for(let l in this.data.sequences){let m=this.data.sequences[l];n+=parseInt(m.duree.code)}return n},async validate(){await fetch(`${this.$url_prefix}/pedagogie/${this.data.id}/validate`),this.data.statut=1},async delete_anim(){await fetch(`${this.$url_prefix}/pedagogie/delete?q=${this.data.id}`).then(n=>{var l=document.createElement("a");l.href="/pedagogie/search",document.body.appendChild(l),l.click(),document.body.removeChild(l)})}},computed:{is_not_public(){let n=0;for(let l in this.data.tags)this.data.tags[l].reference=="ref.public"&&n++;return n==0},is_materiel(){let n=0;for(let l in this.data.sequences)this.data.sequences[l].materiel_div&&n++;return n!=0},is_statut(){return this.data.statut}},async mounted(){this.data=await this.get_anim(),this.data_ready=!0}},x={key:0},M={class:"container large_form bottom_120"},T={class:"form_position"},L={class:"columns text_break"},H={class:"column is-8"},C={class:"title text_color"},w={key:0,class:"text_color"},V=s("b",{class:"text_color"},"Mots-clés :",-1),q={class:"columns is-multiline"},j={class:"column is-2"},D={class:"icon-text"},N={class:"icon"},A={class:"text_color"},B={key:0,class:"column is-2"},E={key:0,class:"icon-text"},F={class:"icon"},P=s("span",{class:"text_color"},"Tout niveau",-1),O={class:"column is-4"},z={class:"field has-addons"},I={class:"control"},S=["href"],G={class:"icon"},J={class:"control"},K={class:"icon"},Q={key:0,class:"button ghost_button"},R={class:"tooltip"},U={class:"icon"},W=s("span",{class:"tooltiptext"},"En cours d'écriture",-1),X={class:"tooltip"},Y={class:"icon-text"},Z={class:"icon"},$=s("span",null,"Valider l'animation",-1),ss=s("span",{class:"tooltiptext"},"Terminée",-1),ts={key:2,class:"button ghost_button"},es={class:"tooltip"},os={class:"icon"},ns=s("span",{class:"tooltiptext"},"Validée",-1),is={class:"box"},ls={class:"columns is-multiline text_break"},cs={class:"column is-4"},as=s("b",null,"Lieux :",-1),_s={class:"column is-4"},ds=s("b",null,"Nombre min/max de personnes :",-1),rs={class:"column is-4"},us=s("b",null,"Durée totale : ",-1),hs={class:"column is-12"},ms=s("b",null,"Objectifs :",-1),ps=["innerHTML"],bs={key:0,class:"column is-6"},vs=s("b",null,"Préconisations :",-1),fs=["innerHTML"],ys={key:1,class:"column is-6"},ks=s("b",null,"Conditions d'annulation :",-1),gs=["innerHTML"],xs={key:2,class:"column is-6"},Ms=s("b",null,"Préparation/Mise en place :",-1),Ts=["innerHTML"],Ls={key:3,class:"column is-6"},Hs=s("b",null,"Matériel :",-1),Cs=["innerHTML"],ws={class:"box"},Vs={class:"column is-12"},qs={class:"title is-4"},js={class:"columns is-multiline text_break"},Ds={class:"column is-4"},Ns=s("b",null,"Description :",-1),As=["innerHTML"],Bs={class:"column is-4"},Es=s("b",null,"Objectifs :",-1),Fs=["innerHTML"],Ps={class:"column is-2"},Os=s("b",null,"Modalité :",-1),zs=s("b",null,"Approche :",-1),Is={class:"column is-2"},Ss=s("b",null,"Durée :",-1),Gs={key:0},Js=s("b",null,"Aperçu médias :",-1),Ks={class:"columns is-multiline text_break"},Qs={class:"column is-2"},Rs=["onClick"],Us=s("div",{class:"modal-background"},null,-1),Ws={class:"modal-content large_modal"},Xs={class:"box"},Ys={class:"subtitle"},Zs={key:0,controls:"",class:"embeb_position"},$s=["src"],st={key:1,controls:"",class:"embeb_position"},tt=["src"],et=["src"],ot={class:"buttons spaced_buttons"},nt=s("i",null,null,-1),it=["onClick"],lt={class:"columns is-multiline text_break"},ct={key:0,class:"column is-6"},at=s("b",null,"Public spécifique :",-1),_t=["innerHTML"],dt={key:1,class:"column is-6"},rt=s("b",null,"Après l'animation :",-1),ut=["innerHTML"];function ht(n,l,m,mt,o,d){const u=k("font-awesome-icon");return o.data_ready?(t(),e("div",x,[s("div",M,[s("div",T,[s("div",L,[s("div",H,[s("h2",C,c(o.data.titre),1),o.data.date_modif?(t(),e("p",w,[s("small",null,"Dernière modification le "+c(o.data.date_modif),1)])):a("",!0),s("p",null,[s("small",null,[V,s("div",q,[(t(!0),e(p,null,b(o.data.tags,i=>(t(),e("div",j,[s("span",D,[s("span",N,[h(u,{icon:["fas","check"],style:{color:"white"}})]),s("span",A,c(i.label),1)])]))),256)),d.is_not_public?(t(),e("div",B,[d.is_not_public?(t(),e("span",E,[s("span",F,[h(u,{icon:["fas","check"]})]),P])):a("",!0)])):a("",!0)])])])]),s("div",O,[s("div",z,[s("p",I,[s("a",{href:"/pedagogie/create?q="+o.data.id,class:"button"},[s("span",G,[h(u,{icon:["fas","pen"]})])],8,S)]),s("p",J,[s("a",{onClick:l[0]||(l[0]=i=>d.delete_anim()),class:"button"},[s("span",K,[h(u,{icon:["fas","trash"]})])])])]),d.is_statut=="3"?(t(),e("span",Q,[s("div",R,[s("span",U,[h(u,{icon:["fas","spinner"]})]),W])])):d.is_statut=="2"?(t(),e("a",{key:1,onClick:l[1]||(l[1]=(...i)=>d.validate&&d.validate(...i)),class:"button"},[s("div",X,[s("span",Y,[s("span",Z,[h(u,{icon:["fas","check"],style:{color:"yellow"}})]),$]),ss])])):(t(),e("span",ts,[s("div",es,[s("span",os,[h(u,{icon:["fas","check"],style:{color:"green"}})]),ns])]))])]),s("div",is,[s("div",ls,[s("div",cs,[as,r(" "+c(o.data.lieu),1)]),s("div",_s,[ds,r(" "+c(o.data._min)+"/"+c(o.data._max),1)]),s("div",rs,[us,r(" "+c(d.get_duree_totale())+" min ",1)]),s("div",hs,[ms,s("div",{innerHTML:n.md(o.data.objectifs)},null,8,ps)]),o.data.preconisations?(t(),e("div",bs,[vs,s("div",{innerHTML:n.md(o.data.preconisations)},null,8,fs)])):a("",!0),o.data.annulation?(t(),e("div",ys,[ks,s("div",{innerHTML:n.md(o.data.annulation)},null,8,gs)])):a("",!0),o.data.pre_anim?(t(),e("div",xs,[Ms,s("div",{innerHTML:n.md(o.data.pre_anim)},null,8,Ts)])):a("",!0),d.is_materiel?(t(),e("div",Ls,[Hs,(t(!0),e(p,null,b(o.data.sequences,i=>(t(),e("div",{innerHTML:n.md(i.materiel_div)},null,8,Cs))),256))])):a("",!0)]),(t(!0),e(p,null,b(o.data.sequences,i=>(t(),e("div",ws,[s("div",{class:v(["columns text_break",i.type_seq.code+"-color"])},[s("div",Vs,[s("h3",qs,[s("b",null,c(i.type_seq.label)+" :",1),r(" "+c(i.titre),1)])])],2),s("div",js,[s("div",Ds,[Ns,s("div",{innerHTML:n.md(i.description)},null,8,As)]),s("div",Bs,[Es,s("div",{innerHTML:n.md(i.objectifs)},null,8,Fs)]),s("div",Ps,[s("p",null,[Os,r(" "+c(i.modalite.label),1)]),s("p",null,[zs,r(" "+c(i.approche.label),1)])]),s("div",Is,[s("p",null,[Ss,r(" "+c(i.duree.label),1)])])]),i.materiel.length?(t(),e("div",Gs,[Js,s("div",Ks,[(t(!0),e(p,null,b(i.materiel,_=>(t(),e("div",Qs,[s("button",{class:"button",onClick:f=>_.open="is-active"},c(_.nom),9,Rs),s("div",{class:v(["modal",_.open])},[Us,s("div",Ws,[s("div",Xs,[s("h1",Ys,c(_.nom),1),_.type_media.code=="video"?(t(),e("video",Zs,[s("source",{src:`${this.$url_prefix}/`+_.url},null,8,$s),r(" Votre navigateur ne supporte pas cette extension. ")])):_.type_media.code=="bandeson"?(t(),e("audio",st,[s("source",{src:`${this.$url_prefix}/`+_.url},null,8,tt),r(" Votre navigateur ne supporte pas cette extension. ")])):(t(),e("embed",{key:2,src:`${this.$url_prefix}/`+_.url,class:"embeb_position"},null,8,et)),s("div",ot,[nt,s("button",{class:"button",onClick:f=>_.open=""},"Fermer",8,it)])])])],2)]))),256))])])):a("",!0)]))),256)),s("div",lt,[o.data.public_specifique?(t(),e("div",ct,[at,s("div",{innerHTML:n.md(o.data.public_specifique)},null,8,_t)])):a("",!0),o.data.post_anim?(t(),e("div",dt,[rt,s("div",{innerHTML:n.md(o.data.post_anim)},null,8,ut)])):a("",!0)])])])])])):a("",!0)}const bt=y(g,[["render",ht]]);export{bt as default};
