import{_ as y,r as v,o as t,c as n,a as e,t as a,i as l,b as p,e as b,F as u,h as d}from"./index-18e94723.js";const k={name:"specimen",props:["specimen"],data(){return{current_media:""}},methods:{get_url(o){return`${this.$url_prefix}/`+o.url},change_media(o){o=="left"?this.current_media=this.current_media==0?this.specimen.medias.length-1:this.current_media-1:this.current_media=this.current_media==this.specimen.medias.length-1?0:this.current_media+1},async delete_specimen(){await fetch(`${this.$url_prefix}/especes/specimen/delete?q=${this.specimen.id}`).then(o=>{var i=document.createElement("a");i.href=`/especes/${this.specimen.taxonomie.id}`,document.body.appendChild(i),i.click(),document.body.removeChild(i)})}},mounted(){this.specimen.medias.length!=0&&(this.current_media=0)}},x={class:"scrollable_content"},C={class:"columns is-gapless is-vcentered"},w={class:"column is-9"},M={key:0},T={class:"column is-3"},L={class:"button ghost_button"},H={class:"field has-addons"},q={class:"control"},S=["href"],N={class:"icon"},V={class:"control"},B={class:"icon"},E={key:0,class:"columns is-vcentered"},F={class:"column is-1"},j={class:"icon"},D={class:"column is-10"},I={key:0,controls:"",class:"embeb_position"},J=["src"],P={key:1,controls:"",class:"embeb_position"},A=["src"],O=["src"],R={class:"column is-1"},U={class:"icon"},z={class:"columns"},G={class:"column is-12"},K=["innerHTML"];function Q(o,i,r,h,s,_){const m=v("font-awesome-icon");return t(),n("div",x,[e("div",C,[e("div",w,[e("p",null,[r.specimen.herbier?(t(),n("small",M,"Part d'herbier : "+a(r.specimen.herbier)+"    ",1)):l("",!0),e("small",null,"Indigénat : "+a(r.specimen.indigenat.label),1)])]),e("div",T,[e("button",L,a(r.specimen.parcelle.label),1),e("div",H,[e("p",q,[e("a",{href:"/especes/"+r.specimen.taxonomie.id+"/create?q="+r.specimen.id,class:"button"},[e("span",N,[p(m,{icon:["fas","pen"]})])],8,S)]),e("p",V,[e("a",{onClick:i[0]||(i[0]=g=>_.delete_specimen()),class:"button"},[e("span",B,[p(m,{icon:["fas","trash"]})])])])])])]),r.specimen.medias[s.current_media]?(t(),n("div",E,[e("div",F,[e("button",{class:"button",onClick:i[1]||(i[1]=g=>_.change_media("left"))},[e("span",j,[p(m,{icon:["fas","caret-left"]})])])]),e("div",D,[r.specimen.medias[s.current_media].type_media.code=="video"?(t(),n("video",I,[e("source",{src:_.get_url(r.specimen.medias[s.current_media])},null,8,J),b(" Votre navigateur ne supporte pas cette extension. ")])):r.specimen.medias[s.current_media].type_media=="bandeson"?(t(),n("audio",P,[e("source",{src:_.get_url(r.specimen.medias[s.current_media])},null,8,A),b(" Votre navigateur ne supporte pas cette extension. ")])):(t(),n("embed",{key:2,src:_.get_url(r.specimen.medias[s.current_media]),class:"embeb_position"},null,8,O))]),e("div",R,[e("button",{class:"button",onClick:i[2]||(i[2]=g=>_.change_media("right"))},[e("span",U,[p(m,{icon:["fas","caret-right"]})])])])])):l("",!0),e("div",z,[e("div",G,[e("div",{innerHTML:o.md(r.specimen.historique)},null,8,K)])])])}const W=y(k,[["render",Q]]),X={name:"especes_consult",components:{Specimen:W},data(){return{data:{},tags:{conservation:[],iucn_monde:[],iucn_europe:[],iucn_region:[],floraison:[],type_bio:[],couleur_fleur:[]},from:"",to:"",specimens:[],current_specimen:"",data_ready:!1}},methods:{async get_taxon(){return await(await fetch(`${this.$url_prefix}/especes/get_taxon?q=${this.$route.params.id}`)).json()},async get_specimens(){return await(await fetch(`${this.$url_prefix}/especes/get_specimens?q=${this.$route.params.id}`)).json()},set_floraison(){let o=[],i=["Décembre","Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre"];for(let r in this.data.tags){let h=this.data.tags[r];h.reference=="ref.floraison"&&o.push(h)}if(o.length!=0){let r=0,h=0;for(let s in i){let _=i[s];o[0].label==_&&(r=s),o[o.length-1].label==_&&(h=s)}h-r+1==o.length?(this.from=o[0].label,this.to=o[o.length-1].label):(this.from=o[o.length-1].label,this.to=o[0].label)}},get_parents(){let o="",i=this.data;for(;i.parent.parent!="";)o=` > <a href="/especes/${i.parent.id}">`+i.parent.nom+"</a>"+o,i=i.parent;return o=`<a href="/especes/${i.parent.id}">`+i.parent.nom+"</a>"+o,o},set_tags(){for(let o in this.data.tags){let i=this.data.tags[o];this.tags[i.reference.slice(4)].push(i)}},change_specimen(o){o=="left"?this.current_specimen=this.current_specimen==0?this.specimens.length-1:this.current_specimen-1:this.current_specimen=this.current_specimen==this.specimens.length-1?0:this.current_specimen+1},async delete_taxon(){await fetch(`${this.$url_prefix}/especes/delete?q=${this.data.id}`).then(o=>{var i=document.createElement("a");i.href="/especes/search",document.body.appendChild(i),i.click(),document.body.removeChild(i)})}},computed:{},async mounted(){this.data=await this.get_taxon(),this.specimens=await this.get_specimens(),this.specimens.length!=0&&(this.current_specimen=0),this.set_floraison(),this.set_tags(),this.data_ready=!0}},Y={key:0},Z={class:"container larger_form bottom_120"},$={class:"form_position"},ee={class:"box"},se={class:"columns"},te={class:"column is-7"},ne={class:"columns is-multiline text_break"},ie={class:"column is-10"},oe={class:"title is-3 jasmine"},ce={key:0},le=e("small",null,"Classification : ",-1),re=["innerHTML"],ae={key:0},_e=e("small",null,"Publication : ",-1),ue=["innerHTML"],de={class:"column is-2"},he={class:"button ghost_button"},me={class:"field has-addons"},pe={class:"control"},ge=["href"],be={class:"icon"},fe={class:"control"},ve={class:"icon"},ye={key:0,class:"column is-half"},ke=e("p",{class:"subtitle is-6"},"Synonymes courants :",-1),xe={class:"subtitle is-6"},Ce={key:0},we={key:1},Me={key:1,class:"column is-half"},Te=e("p",{class:"subtitle is-6"},"Noms vernaculaires :",-1),Le={class:"subtitle is-6"},He={key:0},qe={key:1},Se={class:"column is-12"},Ne=["innerHTML"],Ve={class:"column is-12"},Be=e("p",{class:"subtitle is-6"},[e("b",null,"Bibliographie :")],-1),Ee=["innerHTML"],Fe={key:2,class:"column is-6"},je=e("p",{class:"subtitle is-6"},[e("b",null,"Conservation :")],-1),De={class:"subtitle is-6"},Ie={key:0},Je={key:0,class:"subtitle is-6"},Pe=e("b",null," Status IUCN :",-1),Ae=[Pe],Oe={class:"columns is-multiline"},Re={key:0,class:"column is-6"},Ue=e("p",{class:"subtitle is-6"},[e("b",null,"  Mondial :")],-1),ze={class:"subtitle is-6"},Ge={key:0},Ke={key:1,class:"column is-6"},Qe=e("p",{class:"subtitle is-6"},[e("b",null,"  Européen :")],-1),We={class:"subtitle is-6"},Xe={key:0},Ye={key:2,class:"column is-6"},Ze=e("p",{class:"subtitle is-6"},[e("b",null,"  Régional :")],-1),$e={class:"subtitle is-6"},es={key:0},ss={key:3,class:"column is-6"},ts=e("p",{class:"subtitle is-6"},[e("b",null,"Biologie :")],-1),ns={key:0,class:"subtitle is-6"},is=e("b",null," Floraison : ",-1),os={key:1,class:"subtitle is-6"},cs=e("b",null," Type biologique : ",-1),ls={key:0},rs={key:2,class:"subtitle is-6"},as=e("b",null," Couleur des fleurs : ",-1),_s={key:0},us={class:"column is-5"},ds={class:"columns is-multiline"},hs={class:"column is-12 text_center"},ms=["href"],ps={key:0,class:"column is-12",style:{height:"500px"}},gs={class:"box"},bs={key:1,class:"column is-12"},fs={class:"buttons spaced_buttons"};function vs(o,i,r,h,s,_){const m=v("font-awesome-icon"),g=v("Specimen");return s.data_ready?(t(),n("div",Y,[e("div",Z,[e("div",$,[e("div",ee,[e("div",se,[e("div",te,[e("div",ne,[e("div",ie,[e("p",oe,[e("i",null,a(s.data.nom),1),b(" "+a(s.data.auteur)+", "+a(s.data.annee),1)]),e("p",null,[s.data.parent?(t(),n("span",ce,[le,e("small",{innerHTML:_.get_parents()},null,8,re)])):l("",!0)]),e("p",null,[s.data.publication?(t(),n("span",ae,[_e,e("small",null,[e("div",{innerHTML:o.md(s.data.publication)},null,8,ue)])])):l("",!0)])]),e("div",de,[e("button",he,a(s.data.rang.label),1),e("div",me,[e("p",pe,[e("a",{href:"/especes/create?q="+s.data.id,class:"button"},[e("span",be,[p(m,{icon:["fas","pen"]})])],8,ge)]),e("p",fe,[e("a",{onClick:i[0]||(i[0]=c=>_.delete_taxon()),class:"button"},[e("span",ve,[p(m,{icon:["fas","trash"]})])])])])]),s.data.synonymes.length!=0?(t(),n("div",ye,[ke,e("p",xe,[(t(!0),n(u,null,d(s.data.synonymes,(c,f)=>(t(),n("span",null,[f!=s.data.synonymes.length-1?(t(),n("span",Ce,a(c.synonyme)+", ",1)):(t(),n("span",we,a(c.synonyme),1))]))),256))])])):l("",!0),s.data.vernaculaires.length!=0?(t(),n("div",Me,[Te,e("p",Le,[(t(!0),n(u,null,d(s.data.vernaculaires,(c,f)=>(t(),n("span",null,[f!=s.data.vernaculaires.length-1?(t(),n("span",He,a(c.vernaculaire)+", ",1)):(t(),n("span",qe,a(c.vernaculaire),1))]))),256))])])):l("",!0),e("div",Se,[e("div",{innerHTML:o.md(s.data.description),class:"box"},null,8,Ne)]),e("div",Ve,[Be,e("div",{innerHTML:o.md(s.data.bibliographie)},null,8,Ee)]),s.tags.conservation.length!=0||s.tags.iucn_monde.length!=0||s.tags.iucn_europe.length!=0||s.tags.iucn_region.length!=0?(t(),n("div",Fe,[je,e("p",De,[(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.conservation"?(t(),n("p",Ie," "+a(c.label),1)):l("",!0)]))),256))]),s.tags.iucn_monde.length!=0||s.tags.iucn_europe.length!=0||s.tags.iucn_region.length!=0?(t(),n("p",Je,Ae)):l("",!0),e("div",Oe,[s.tags.iucn_monde.length!=0?(t(),n("div",Re,[Ue,e("p",ze,[(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.iucn_monde"?(t(),n("p",Ge,"   "+a(c.label),1)):l("",!0)]))),256))])])):l("",!0),s.tags.iucn_europe.length!=0?(t(),n("div",Ke,[Qe,e("p",We,[(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.iucn_europe"?(t(),n("p",Xe,"   "+a(c.label),1)):l("",!0)]))),256))])])):l("",!0),s.tags.iucn_region.length!=0?(t(),n("div",Ye,[Ze,e("p",$e,[(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.iucn_region"?(t(),n("p",es,"   "+a(c.label),1)):l("",!0)]))),256))])])):l("",!0)])])):l("",!0),s.tags.floraison.length!=0||s.tags.type_bio.length!=0||s.tags.couleur_fleur.length!=0?(t(),n("div",ss,[ts,s.tags.floraison.length!=0?(t(),n("p",ns,[is,b(" De "+a(s.from)+" à "+a(s.to),1)])):l("",!0),s.tags.type_bio.length!=0?(t(),n("p",os,[cs,(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.type_bio"?(t(),n("span",ls,a(c.label),1)):l("",!0)]))),256))])):l("",!0),s.tags.couleur_fleur.length!=0?(t(),n("p",rs,[as,(t(!0),n(u,null,d(s.data.tags,c=>(t(),n("span",null,[c.reference=="ref.couleur_fleur"?(t(),n("span",_s,a(c.label),1)):l("",!0)]))),256))])):l("",!0)])):l("",!0)])]),e("div",us,[e("div",ds,[e("div",hs,[e("a",{href:"/especes/"+s.data.id+"/create",class:"button"},"Insérer un specimen",8,ms)]),s.specimens.length!=0?(t(),n("div",ps,[e("div",gs,[p(g,{specimen:s.specimens[s.current_specimen]},null,8,["specimen"])])])):l("",!0),s.specimens.length!=0?(t(),n("div",bs,[e("div",fs,[e("button",{class:"button",onClick:i[1]||(i[1]=c=>_.change_specimen("left"))},"Précédent"),e("button",{class:"button",onClick:i[2]||(i[2]=c=>_.change_specimen("right"))},"Suivant")])])):l("",!0)])])])])])])])):l("",!0)}const ks=y(X,[["render",vs]]);export{ks as default};
