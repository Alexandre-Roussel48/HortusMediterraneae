import{_ as v,r as b,o as t,c as e,a as s,t as a,F as p,h as m,i as c,b as u,d as g,f as k,j as x,e as $}from"./index-e0acc92b.js";const q={name:"anims",props:["key","query"],data(){return{rep:[],anims:[],pertinence:[],anims_ready:!1}},methods:{async get_anims(){let i="";for(let h in this.query)i+=`&tag=${this.query[h]}`;return i=i.replace("&tag","tag"),await(await fetch(`${this.$url_prefix}/pedagogie/results?${i}`)).json()},is_not_public(i){let r=0;for(let h in i.tags)i.tags[h].reference=="ref.public"&&r++;return r==0}},computed:{},async mounted(){this.rep=await this.get_anims();for(let i in this.rep)this.anims.push(this.rep[i][0]),this.pertinence.push(this.rep[i][1]);this.anims_ready=!0}},w={key:0},M={class:"container large_form bottom_120"},T={class:"form_position"},L={class:"subtitle is-6 text_color"},V={class:"box"},j={class:"form_position"},H={class:"box"},N={class:"columns is-multiline text_break"},B={class:"column is-9"},C={class:"title is-5"},A={key:0,class:"subtitle is-6"},D={class:"column is-3"},P={class:"buttons"},E={class:"button ghost_button"},F={key:0,class:"tooltip"},O={class:"icon"},S=s("span",{class:"tooltiptext"},"En cours d'écriture",-1),R={key:1,class:"tooltip"},U={class:"icon"},z=s("span",{class:"tooltiptext"},"Terminée",-1),G={key:2,class:"tooltip"},I={class:"icon"},J=s("span",{class:"tooltiptext"},"Validée",-1),K=["href"],Q={class:"tooltip"},W={class:"icon"},X=s("span",{class:"tooltiptext"},"Éditer l'animation",-1),Y=["href"],Z={class:"column is-4"},ss=s("b",null,"Objectifs :",-1),ts=["innerHTML"],es={class:"column is-4"},os={key:0},is=["innerHTML"],ns={class:"column is-4"},cs={key:0},_s=["innerHTML"],ls={class:"column is-6"},as={key:0},rs={class:"column is-6"},ds=s("b",null,"Niveaux :",-1),us={class:"columns is-multiline"},hs={class:"column is-2"},ps={key:0,class:"icon-text"},ms={class:"icon"},fs={key:0,class:"icon-text"},ys={class:"icon"},vs=s("span",null,"Tout niveau",-1),bs={class:"column is-12"},gs=s("b",null,"Mots-clés :",-1),ks={class:"columns is-multiline"},xs={class:"column is-2"},$s={key:0,class:"icon-text"},qs={class:"icon"};function ws(i,r,h,f,n,y){const _=b("font-awesome-icon");return n.anims_ready?(t(),e("div",w,[s("div",M,[s("div",T,[s("p",L,a(n.anims.length)+" résultat(s)",1),s("div",V,[(t(!0),e(p,null,m(n.anims,(o,l)=>(t(),e("div",j,[s("div",H,[s("div",N,[s("div",B,[s("h2",C,a(o.titre),1),n.pertinence[l]?(t(),e("h4",A,"Pertinence : "+a(n.pertinence[l]),1)):c("",!0)]),s("div",D,[s("div",P,[s("span",E,[o.statut==3?(t(),e("div",F,[s("span",O,[u(_,{icon:["fas","spinner"]})]),S])):o.statut==2?(t(),e("div",R,[s("span",U,[u(_,{icon:["fas","check"],style:{color:"yellow"}})]),z])):(t(),e("div",G,[s("span",I,[u(_,{icon:["fas","check"],style:{color:"green"}})]),J]))]),s("a",{href:"/pedagogie/create?q="+o.id,class:"button"},[s("div",Q,[s("span",W,[u(_,{icon:["fas","pen"]})]),X])],8,K),s("a",{href:"/pedagogie/"+o.id,class:"button"},"Consulter",8,Y)])]),s("div",Z,[ss,s("div",{innerHTML:i.md(o.objectifs)},null,8,ts)]),s("div",es,[o.preconisations?(t(),e("b",os,"Préconisations :")):c("",!0),o.preconisations?(t(),e("div",{key:1,innerHTML:i.md(o.preconisations)},null,8,is)):c("",!0)]),s("div",ns,[o.pre_anim?(t(),e("b",cs,"Préparation :")):c("",!0),o.pre_anim?(t(),e("div",{key:1,innerHTML:i.md(o.pre_anim)},null,8,_s)):c("",!0)]),s("div",ls,[o.date_modif?(t(),e("small",as,"Dernière modification le "+a(o.date_modif),1)):c("",!0)]),s("div",rs,[ds,s("div",us,[(t(!0),e(p,null,m(o.tags,d=>(t(),e("div",hs,[d.reference=="ref.public"?(t(),e("span",ps,[s("span",ms,[u(_,{icon:["fas","check"]})]),s("span",null,a(d.label),1)])):c("",!0)]))),256))]),y.is_not_public(o)?(t(),e("span",fs,[s("span",ys,[u(_,{icon:["fas","check"]})]),vs])):c("",!0)]),s("div",bs,[gs,s("div",ks,[(t(!0),e(p,null,m(o.tags,d=>(t(),e("div",xs,[d.reference!="ref.public"?(t(),e("span",$s,[s("span",qs,[u(_,{icon:["fas","check"]})]),s("span",null,a(d.label),1)])):c("",!0)]))),256))])])])])]))),256))])])])])):c("",!0)}const Ms=v(q,[["render",ws]]),Ts={name:"search_form",components:{Anims:Ms},data(){return{tags:[],data_ready:!1,query:[],key:0}},methods:{async get_tags(){return await(await fetch(`${this.$url_prefix}/pedagogie/get_tags_search`)).json()}},watch:{query:function(){this.key++}},async mounted(){this.tags=await this.get_tags(),this.data_ready=!0}},Ls={key:0},Vs={class:"container large_form"},js={class:"form_position"},Hs=s("h1",{class:"subtitle text_color"},"Rechercher une animation",-1),Ns={class:"box"},Bs=s("p",{class:"subtitle"},"Mots-clés*",-1),Cs={class:"form_position"},As={class:"subtitle is-6"},Ds={class:"columns is-gapless is-multiline"},Ps={class:"column is-2"},Es=["for"],Fs=["value","name","id"];function Os(i,r,h,f,n,y){const _=b("Anims");return n.data_ready?(t(),e("div",Ls,[s("div",Vs,[s("div",js,[Hs,s("div",Ns,[Bs,(t(!0),e(p,null,m(Object.keys(n.tags),o=>(t(),e("div",Cs,[s("p",As,a(o),1),s("div",Ds,[(t(!0),e(p,null,m(n.tags[o],l=>(t(),e("div",Ps,[s("label",{for:l.id},[k(s("input",{type:"checkbox",value:l.id,name:l.code,id:l.id,"onUpdate:modelValue":r[0]||(r[0]=d=>n.query=d)},null,8,Fs),[[x,n.query]]),$(" "+a(l.label),1)],8,Es)]))),256))])]))),256))])])]),(t(),g(_,{key:n.key,query:n.query},null,8,["query"]))])):c("",!0)}const Rs=v(Ts,[["render",Os]]);export{Rs as default};
