import{_ as k,r as y,o as t,c as e,a as s,t as a,F as p,h as m,i as c,b as l,w as g,e as x,d as $,f as w,j as q}from"./index-aa26a53f.js";const L={name:"anims",props:["key","query"],data(){return{rep:[],anims:[],pertinence:[],anims_ready:!1}},methods:{async get_anims(){let n="";for(let d in this.query)n+=`&tag=${this.query[d]}`;return n=n.replace("&tag","tag"),await(await fetch(`${this.$url_prefix}/pedagogie/results?${n}`)).json()},is_not_public(n){let r=0;for(let d in n.tags)n.tags[d].reference=="ref.public"&&r++;return r==0}},computed:{},async mounted(){this.rep=await this.get_anims();for(let n in this.rep)this.anims.push(this.rep[n][0]),this.pertinence.push(this.rep[n][1]);this.anims_ready=!0}},M={key:0},T={class:"container large_form bottom_120"},V={class:"form_position"},j={class:"subtitle is-6 text_color"},H={class:"box"},C={class:"form_position"},N={class:"box"},B={class:"columns is-multiline text_break"},A={class:"column is-9"},D={class:"title is-5"},P={key:0,class:"subtitle is-6"},R={class:"column is-3"},E={class:"buttons"},F={class:"button ghost_button"},O={key:0,class:"tooltip"},S={class:"icon"},U=s("span",{class:"tooltiptext"},"En cours d'écriture",-1),z={key:1,class:"tooltip"},G={class:"icon"},I=s("span",{class:"tooltiptext"},"Terminée",-1),J={key:2,class:"tooltip"},K={class:"icon"},Q=s("span",{class:"tooltiptext"},"Validée",-1),W={class:"tooltip"},X={class:"icon"},Y=s("span",{class:"tooltiptext"},"Éditer l'animation",-1),Z={class:"column is-4"},ss=s("b",null,"Objectifs :",-1),ts=["innerHTML"],es={class:"column is-4"},os={key:0},ns=["innerHTML"],is={class:"column is-4"},cs={key:0},_s=["innerHTML"],ls={class:"column is-6"},as={key:0},rs={class:"column is-6"},ds=s("b",null,"Niveaux :",-1),us={class:"columns is-multiline"},hs={class:"column is-2"},ps={key:0,class:"icon-text"},ms={class:"icon"},fs={key:0,class:"icon-text"},ys={class:"icon"},vs=s("span",null,"Tout niveau",-1),bs={class:"column is-12"},gs=s("b",null,"Mots-clés :",-1),ks={class:"columns is-multiline"},xs={class:"column is-2"},$s={key:0,class:"icon-text"},ws={class:"icon"};function qs(n,r,d,v,i,b){const _=y("font-awesome-icon"),u=y("RouterLink");return i.anims_ready?(t(),e("div",M,[s("div",T,[s("div",V,[s("p",j,a(i.anims.length)+" résultat(s)",1),s("div",H,[(t(!0),e(p,null,m(i.anims,(o,f)=>(t(),e("div",C,[s("div",N,[s("div",B,[s("div",A,[s("h2",D,a(o.titre),1),i.pertinence[f]?(t(),e("h4",P,"Pertinence : "+a(i.pertinence[f]),1)):c("",!0)]),s("div",R,[s("div",E,[s("span",F,[o.statut==3?(t(),e("div",O,[s("span",S,[l(_,{icon:["fas","spinner"]})]),U])):o.statut==2?(t(),e("div",z,[s("span",G,[l(_,{icon:["fas","check"],style:{color:"yellow"}})]),I])):(t(),e("div",J,[s("span",K,[l(_,{icon:["fas","check"],style:{color:"green"}})]),Q]))]),l(u,{to:"/pedagogie/create?q="+o.id,class:"button"},{default:g(()=>[s("div",W,[s("span",X,[l(_,{icon:["fas","pen"]})]),Y])]),_:2},1032,["to"]),l(u,{to:"/pedagogie/"+o.id,class:"button"},{default:g(()=>[x("Consulter")]),_:2},1032,["to"])])]),s("div",Z,[ss,s("div",{innerHTML:n.md(o.objectifs)},null,8,ts)]),s("div",es,[o.preconisations?(t(),e("b",os,"Préconisations :")):c("",!0),o.preconisations?(t(),e("div",{key:1,innerHTML:n.md(o.preconisations)},null,8,ns)):c("",!0)]),s("div",is,[o.pre_anim?(t(),e("b",cs,"Préparation :")):c("",!0),o.pre_anim?(t(),e("div",{key:1,innerHTML:n.md(o.pre_anim)},null,8,_s)):c("",!0)]),s("div",ls,[o.date_modif?(t(),e("small",as,"Dernière modification le "+a(o.date_modif),1)):c("",!0)]),s("div",rs,[ds,s("div",us,[(t(!0),e(p,null,m(o.tags,h=>(t(),e("div",hs,[h.reference=="ref.public"?(t(),e("span",ps,[s("span",ms,[l(_,{icon:["fas","check"]})]),s("span",null,a(h.label),1)])):c("",!0)]))),256))]),b.is_not_public(o)?(t(),e("span",fs,[s("span",ys,[l(_,{icon:["fas","check"]})]),vs])):c("",!0)]),s("div",bs,[gs,s("div",ks,[(t(!0),e(p,null,m(o.tags,h=>(t(),e("div",xs,[h.reference!="ref.public"?(t(),e("span",$s,[s("span",ws,[l(_,{icon:["fas","check"]})]),s("span",null,a(h.label),1)])):c("",!0)]))),256))])])])])]))),256))])])])])):c("",!0)}const Ls=k(L,[["render",qs]]),Ms={name:"search_form",components:{Anims:Ls},data(){return{tags:[],data_ready:!1,query:[],key:0}},methods:{async get_tags(){return await(await fetch(`${this.$url_prefix}/pedagogie/get_tags_search`)).json()}},watch:{query:function(){this.key++}},async mounted(){this.tags=await this.get_tags(),this.data_ready=!0}},Ts={key:0},Vs={class:"container large_form"},js={class:"form_position"},Hs=s("h1",{class:"subtitle text_color"},"Rechercher une animation",-1),Cs={class:"box"},Ns=s("p",{class:"subtitle"},"Mots-clés*",-1),Bs={class:"form_position"},As={class:"subtitle is-6"},Ds={class:"columns is-gapless is-multiline"},Ps={class:"column is-2"},Rs=["for"],Es=["value","name","id"];function Fs(n,r,d,v,i,b){const _=y("Anims");return i.data_ready?(t(),e("div",Ts,[s("div",Vs,[s("div",js,[Hs,s("div",Cs,[Ns,(t(!0),e(p,null,m(Object.keys(i.tags),u=>(t(),e("div",Bs,[s("p",As,a(u),1),s("div",Ds,[(t(!0),e(p,null,m(i.tags[u],o=>(t(),e("div",Ps,[s("label",{for:o.id},[w(s("input",{type:"checkbox",value:o.id,name:o.code,id:o.id,"onUpdate:modelValue":r[0]||(r[0]=f=>i.query=f)},null,8,Es),[[q,i.query]]),x(" "+a(o.label),1)],8,Rs)]))),256))])]))),256))])])]),(t(),$(_,{key:i.key,query:i.query},null,8,["query"]))])):c("",!0)}const Ss=k(Ms,[["render",Fs]]);export{Ss as default};
